/-
Copyright (c) 2025 ZKLib Contributors. All rights reserved.
Released under Apache 2.0 license as described in the file LICENSE.
Authors: Least Authority
-/

\section{Out of domain sampling}\label{sec:out_of_domain_smpl}
\begin{lemma}\label{lemma:out_of_domain_smpl}
%\lean{}
%\leanok
\uses{def:rscode,def:list_decodable}
    Let $f:\evaldomain\rightarrow\field$ be a function, $\degree\in\N$ be a degree parameter, $s\in\N$ be a repetition parameter, and $\distance\in[0,1]$ be a distance parameter. If $\rscode[\field,\evaldomain,\degree]$ be $(\degree,l)$-list decodable then
    \begin{align*}
    \Pr_{r_1,\ldots,r_s\gets\field\setminus\evaldomain}[\exists\text{ distinct }u,u'\in\listcode(f,\degree,\distance):\forall i\in[s],\hat{u}(r_i)=\hat{u}'(r_i)] & \leq \binom{l}{2}\cdot{\Big(\frac{\degree-1}{|\field|-|\evaldomain|}\Big)}^s \\
    & \leq \Big(\frac{l^2}{2}\Big)\cdot{\Big(\frac{\degree}{|\field|-|\evaldomain|}\Big)}^s
    \end{align*}
\end{lemma}